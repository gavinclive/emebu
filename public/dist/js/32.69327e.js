(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{60:function(t,e,r){"use strict";r.r(e);var o=r(0),s=r.n(o),a=r(7),i=r.n(a),n=r(6);function l(t,e,r,o,s,a,i){try{var n=t[a](i),l=n.value}catch(t){return void r(t)}n.done?e(l):Promise.resolve(l).then(o,s)}function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function m(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var u,f,p={scrollToTop:!1,metaInfo:function(){return{title:this.$t("edit_profile")}},data:function(){return{form:new i.a({name:"",email:"",img:""}),imagePreview:""}},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(r,!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({routeName:function(){return this.$route.name}},Object(n.b)({user:"auth/user"})),created:function(){var t=this;this.form.keys().forEach((function(e){t.form[e]=t.user[e]}))},methods:{imageUpload:function(t){var e=this,r=new FileReader;t&&t.type.match("image.*")&&(r.readAsDataURL(t),r.onload=function(){e.imagePreview=r.result},this.form.img=t)},update:(u=s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.form._method="PATCH",t.prev=1,t.next=4,this.form.submit("post","/api/settings/profile",{transformRequest:[function(t,e){return objectToFormData(t)}]});case 4:this.$store.dispatch("auth/fetchUser"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.log(t.t0);case 10:case"end":return t.stop()}}),t,this,[[1,7]])})),f=function(){var t=this,e=arguments;return new Promise((function(r,o){var s=u.apply(t,e);function a(t){l(s,r,o,a,i,"next",t)}function i(t){l(s,r,o,a,i,"throw",t)}a(void 0)}))},function(){return f.apply(this,arguments)})}},d=r(1),v=Object(d.a)(p,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{on:{submit:function(e){return e.preventDefault(),t.update(e)},keydown:function(e){return t.form.onKeydown(e)}}},[r("alert-success",{attrs:{form:t.form,message:t.$t("info_updated")}}),t._v(" "),r("div",{staticClass:"form-group row d-flex justify-content-center mb-0"},[r("div",{staticClass:"col-md-10 py-0"},[r("label",{staticClass:"col-3 pt-0 col-form-label"},[t._v(t._s(t.$t("name")))]),t._v(" "),r("div",{staticClass:"col-md-12 d-flex align-items-center py-1"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control col-md-11",class:{"is-invalid":t.form.errors.has("name")},attrs:{type:"text",name:"name"},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}})]),t._v(" "),r("has-error",{staticClass:"d-block pl-3 text-left",attrs:{form:t.form,field:"name"}})],1)]),t._v(" "),r("div",{staticClass:"form-group row d-flex justify-content-center mb-0"},[r("div",{staticClass:"col-md-10 pb-0"},[r("label",{staticClass:"col-3 col-form-label"},[t._v(t._s(t.$t("email")))]),t._v(" "),r("div",{staticClass:"col-md-12 d-flex align-items-center py-1"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"form-control col-md-11",class:{"is-invalid":t.form.errors.has("email")},attrs:{type:"text",name:"name"},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}})]),t._v(" "),r("has-error",{staticClass:"d-block pl-3 text-left",attrs:{form:t.form,field:"email"}})],1)]),t._v(" "),t.routeName.includes("m.")?t._e():r("div",{staticClass:"form-group row d-flex justify-content-center mb-0"},[r("div",{staticClass:"col-md-10 pb-0"},[r("label",{staticClass:"col-12 col-form-label"},[t._v(t._s(t.$t("profile_picture")))]),t._v(" "),r("div",{staticClass:"col-md-12 d-flex align-items-center py-1 custom-file"},[r("div",{staticClass:"custom-file col-md-11"},[r("input",{staticClass:"custom-file-input",attrs:{type:"file",accept:"image/*"},on:{change:function(e){return t.imageUpload(e.target.files[0])}}}),t._v(" "),r("label",{staticClass:"custom-file-label"},[t._v(t._s(t.$t("choose_file")))])])]),t._v(" "),t.imagePreview?r("label",{staticClass:"col-3 col-form-label"},[t._v(t._s(t.$t("image_preview")))]):t._e(),t._v(" "),r("div",{staticClass:"col-12 py-0"},[r("img",{staticClass:"col-6 px-0",attrs:{src:t.imagePreview}})]),t._v(" "),r("has-error",{staticClass:"d-block pl-3 text-left",attrs:{form:t.form,field:"email"}})],1)]),t._v(" "),t.routeName.includes("m.")?t._e():r("div",{staticClass:"form-group row d-flex justify-content-center mt-3"},[r("div",{staticClass:"d-flex col-md-9 px-0"},[r("v-button",{attrs:{loading:t.form.busy,type:"success"}},[t._v("\n        "+t._s(t.$t("update"))+"\n      ")])],1)]),t._v(" "),t.routeName.includes("m.")?r("div",{staticClass:"form-group row d-flex justify-content-center mt-3 mx-0 col-12"},[r("v-button",{attrs:{block:"",loading:t.form.busy,type:"success"}},[t._v("\n      "+t._s(t.$t("update"))+"\n    ")])],1):t._e()],1)}),[],!1,null,null,null);e.default=v.exports}}]);