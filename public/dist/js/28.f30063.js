(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{52:function(e,t,r){"use strict";r.r(t);var s=r(0),a=r.n(s),o=r(7),n=r.n(o),i=r(5);function l(e,t,r,s,a,o,n){try{var i=e[o](n),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(s,a)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u,f,d={scrollToTop:!1,metaInfo:function(){return{title:this.$t("edit_profile")}},data:function(){return{form:new n.a({username:"",name:"",email:"",img:""}),imagePreview:""}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(r,!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({routeName:function(){return this.$route.name}},Object(i.b)({user:"auth/user"})),created:function(){var e=this;this.form.keys().forEach((function(t){e.form[t]=e.user[t]}))},methods:{imageUpload:function(e){var t=this,r=new FileReader;e&&e.type.match("image.*")&&(r.readAsDataURL(e),r.onload=function(){t.imagePreview=r.result},this.form.img=e)},update:(u=a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.form._method="PATCH",e.prev=1,e.next=4,this.form.submit("post","/api/settings/profile",{transformRequest:[function(e,t){return objectToFormData(e)}]});case 4:this.$store.dispatch("auth/fetchUser"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[1,7]])})),f=function(){var e=this,t=arguments;return new Promise((function(r,s){var a=u.apply(e,t);function o(e){l(a,r,s,o,n,"next",e)}function n(e){l(a,r,s,o,n,"throw",e)}o(void 0)}))},function(){return f.apply(this,arguments)})}},p=r(1),v=Object(p.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{on:{submit:function(t){return t.preventDefault(),e.update(t)},keydown:function(t){return e.form.onKeydown(t)}}},[r("alert-success",{attrs:{form:e.form,message:e.$t("info_updated")}}),e._v(" "),r("div",{staticClass:"form-group row d-flex justify-content-center mb-0"},[r("div",{staticClass:"col-md-10 py-0"},[r("label",{staticClass:"col-3 pt-0 col-form-label"},[e._v(e._s(e.$t("name")))]),e._v(" "),r("div",{staticClass:"col-md-12 d-flex align-items-center py-1"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name,expression:"form.name"}],staticClass:"form-control col-md-11",class:{"is-invalid":e.form.errors.has("name")},attrs:{type:"text",name:"name"},domProps:{value:e.form.name},on:{input:function(t){t.target.composing||e.$set(e.form,"name",t.target.value)}}})]),e._v(" "),r("has-error",{staticClass:"d-block pl-3 text-left",attrs:{form:e.form,field:"name"}})],1)]),e._v(" "),e.form.username?r("div",{staticClass:"form-group row d-flex justify-content-center mb-0"},[r("div",{staticClass:"col-md-10 pb-0"},[r("label",{staticClass:"col-3 pt-0 col-form-label"},[e._v(e._s(e.$t("username")))]),e._v(" "),r("div",{staticClass:"col-md-12 d-flex align-items-center py-1"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.username,expression:"form.username"}],staticClass:"form-control col-md-11",class:{"is-invalid":e.form.errors.has("username")},attrs:{type:"text",name:"username"},domProps:{value:e.form.username},on:{input:function(t){t.target.composing||e.$set(e.form,"username",t.target.value)}}})]),e._v(" "),r("has-error",{staticClass:"d-block pl-3 text-left",attrs:{form:e.form,field:"username"}})],1)]):e._e(),e._v(" "),r("div",{staticClass:"form-group row d-flex justify-content-center mb-0"},[r("div",{staticClass:"col-md-10 pb-0"},[r("label",{staticClass:"col-3 col-form-label"},[e._v(e._s(e.$t("email")))]),e._v(" "),r("div",{staticClass:"col-md-12 d-flex align-items-center py-1"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],staticClass:"form-control col-md-11",class:{"is-invalid":e.form.errors.has("email")},attrs:{type:"text",name:"name"},domProps:{value:e.form.email},on:{input:function(t){t.target.composing||e.$set(e.form,"email",t.target.value)}}})]),e._v(" "),r("has-error",{staticClass:"d-block pl-3 text-left",attrs:{form:e.form,field:"email"}})],1)]),e._v(" "),e.routeName.includes("m.")?e._e():r("div",{staticClass:"form-group row d-flex justify-content-center mb-0"},[r("div",{staticClass:"col-md-10 pb-0"},[r("label",{staticClass:"col-12 col-form-label"},[e._v(e._s(e.$t("profile_picture")))]),e._v(" "),r("div",{staticClass:"col-md-12 d-flex align-items-center py-1 custom-file"},[r("div",{staticClass:"custom-file col-md-11"},[r("input",{staticClass:"custom-file-input",attrs:{type:"file",accept:"image/*"},on:{change:function(t){return e.imageUpload(t.target.files[0])}}}),e._v(" "),r("label",{staticClass:"custom-file-label"},[e._v(e._s(e.$t("choose_file")))])])]),e._v(" "),e.imagePreview?r("label",{staticClass:"col-3 col-form-label"},[e._v(e._s(e.$t("image_preview")))]):e._e(),e._v(" "),r("div",{staticClass:"col-12 py-0"},[r("img",{staticClass:"col-6 px-0",attrs:{src:e.imagePreview}})]),e._v(" "),r("has-error",{staticClass:"d-block pl-3 text-left",attrs:{form:e.form,field:"email"}})],1)]),e._v(" "),e.routeName.includes("m.")?e._e():r("div",{staticClass:"form-group row d-flex justify-content-center mt-3"},[r("div",{staticClass:"d-flex col-md-9 px-0"},[r("v-button",{attrs:{loading:e.form.busy,type:"success"}},[e._v("\n        "+e._s(e.$t("update"))+"\n      ")])],1)]),e._v(" "),e.routeName.includes("m.")?r("div",{staticClass:"form-group row d-flex justify-content-center mt-3 mx-0 col-12"},[r("v-button",{attrs:{block:"",loading:e.form.busy,type:"success"}},[e._v("\n      "+e._s(e.$t("update"))+"\n    ")])],1):e._e()],1)}),[],!1,null,null,null);t.default=v.exports}}]);